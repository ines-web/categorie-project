<div class="modal show fade" tabindex="-1" role="dialog" style="display: block; z-index: 1050;">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content shadow rounded">
      <!-- Header du Modal -->
      <div class="modal-header bg-dark text-white">
        <h5 class="modal-title fw-bold">
          <i class="bi bi-link me-2"></i>Associer "{{ childCategory?.nom }}" à un parent
        </h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          (click)="closePopup()"
          aria-label="Fermer"
        ></button>
      </div>

      <!-- Corps du Modal -->
      <div class="modal-body">
        <form class="mb-0 d-flex flex-column gap-3">
          <!-- Champ de sélection : Catégorie Parent -->
          <div class="form-group">
            <label for="category-select" class="form-label fw-bold text-dark">
              Rechercher ou sélectionner une catégorie parent :
            </label>

            <!-- ng-select -->
            <ng-select
              [items]="potentialParents"
              bindLabel="nom"
              bindValue="id" 
              [(ngModel)]="selectedParentId"
              (change)="selectCategory($event)"
              [searchable]="true"
              [clearable]="true"
              appendTo="body"
              [ngModelOptions]="{standalone: true}"
              [placeholder]="customPlaceholder"
              class="form-control"
            >
              <!-- Template personnalisé pour le contenu des options -->
              <ng-template ng-option-tmp let-item="item">
                <span class="fw-semibold text-dark">{{ item.nom }}</span>
              </ng-template>
            </ng-select>
          </div>
        </form>
      </div>

      <!-- Pied du Modal -->
      <div class="modal-footer d-flex justify-content-end gap-3">
        <button
          type="button"
          class="btn btn-secondary rounded-pill shadow-sm px-4"
          (click)="closePopup()"
        >
          <i class="fas fa-times me-2"></i>Annuler
        </button>

        <button
          type="button"
          class="btn btn-primary rounded-pill shadow-sm px-4"
          (click)="onAssociate()"
        >
          <i class="fas fa-link me-2"></i>Associer
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal-backdrop fade show" style="z-index: 1040;"></div>
