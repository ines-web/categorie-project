
<div class="container mt-3">
    <button class="btn btn-primary" (click)="openCreateCategoryPopup()">
      Créer une catégorie
    </button>
    <div class="container mt-3">
      <app-categorie-search (searchEvent)="onSearch($event)"></app-categorie-search>
      <div class="container mt-3">
        <h2>Tableau des catégories</h2>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>
                <span>Nom</span>
                <i class="fas fa-sort" (click)="sortBy('nom')"></i>
              </th>
              <th>
                <span>Date de Création</span>
                <i class="fas fa-sort" (click)="sortBy('dateCreation')"></i>
              </th>
              <th>
                <span>Nombre d'Enfants</span>
                <i class="fas fa-sort" (click)="sortBy('nombreEnfants')"></i>
              </th>
              <th>Enfants</th>
              <th>Actions</th>
            </tr>
          </thead>
          
          <tbody>
            <tr *ngFor="let item of tableauData | paginate: { itemsPerPage: 10, currentPage: page }">
              <td>{{ item.nom }}</td>
              <td>{{ item.dateCreation | date:'dd/MM/yyyy' }}</td>
              <td>{{ item.nombreEnfants }}</td>
              <td>
                <!-- Afficher les enfants, s'il y en a -->
                <ul *ngIf="item.categoriesEnfants.length > 0">
                  <li *ngFor="let enfant of item.categoriesEnfants">
                    {{ enfant.nom }}
                  </li>
                </ul>
                <!-- Si aucun enfant, afficher un message -->
                <span *ngIf="item.categoriesEnfants.length === 0">Aucun enfant</span>
              </td>
              <td>
                <!-- Action buttons (Edit, Delete, View, etc.) -->
                <button class="btn btn-sm btn-primary" (click)="viewCategory(item)">
                  <i class="fas fa-eye"></i> <!-- View icon -->
                </button>
                <button class="btn btn-sm btn-warning" (click)="editCategory(item)">
                  <i class="fas fa-edit"></i> <!-- Edit icon -->
                </button>
                <button class="btn btn-sm btn-danger" (click)="deleteCategory(item)">
                  <i class="fas fa-trash-alt"></i> <!-- Delete icon -->
                </button>
                <button class="btn btn-sm btn-info" (click)="infoCategory(item)">
                  <i class="fas fa-info-circle"></i> <!-- Info icon -->
                </button>
              </td>
            </tr>
          </tbody>
        </table>
        <pagination-controls
        (pageChange)="page = $event"
        previousLabel="Précédent"
        nextLabel="Suivant"></pagination-controls>
      </div>
    </div>    
    <app-create-category-popup 
      *ngIf="isPopupVisible" 
      (close)="closeCreateCategoryPopup()"
      (categoryCreated)="onCategoryCreated()">
    </app-create-category-popup>

    <app-associate-category-popup
    *ngIf="isAssociatePopupVisible"
    [childCategory]="selectedChild"
    (close)="closeAssociatePopup()"
    (associate)="onAssociateCategory($event)">
  </app-associate-category-popup>
</div>

<!-- ... -->
<app-edit-category-popup 
  *ngIf="isEditPopupVisible" 
  [category]="selectedCategory"
  (close)="closeEditCategoryPopup()"
  (update)="onCategoryUpdated($event)">
</app-edit-category-popup>
<!-- ... -->



